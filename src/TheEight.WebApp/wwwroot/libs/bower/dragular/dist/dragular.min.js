!function e(r,n,t){function o(a,l){if(!n[a]){if(!r[a]){var c="function"==typeof require&&require;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var s=n[a]={exports:{}};r[a][0].call(s.exports,function(e){var n=r[a][1][e];return o(n?n:e)},s,s.exports,e,r,n,t)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<t.length;a++)o(t[a]);return o}({1:[function(e,r,n){"use strict";var t=e("./dragularModule");t.directive("dragular",["dragularService",function(e){return{restrict:"A",link:function(r,n,t){function o(e){try{return JSON.parse(e)}catch(r){return void 0}}var i=r[t.dragular]||o(t.dragular);i&&i.containersModel&&"string"==typeof i.containersModel&&(i.containersModel=r.$eval(i.containersModel)),e(n[0],i)}}}])},{"./dragularModule":2}],2:[function(e,r,n){"use strict";r.exports=angular.module("dragularModule",[]),{dragularDirective:e("./dragularDirective.js"),dragularService:e("./dragularService.js")}},{"./dragularDirective.js":1,"./dragularService.js":3}],3:[function(e,r,n){"use strict";var t=e("./dragularModule");t.factory("dragularService",["$rootScope",function(e){function r(e,r,n,t){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i=angular.element(e);o[n]&&i[r](o[n],t),i[r](n,t)}function n(){return!1}function t(){return!0}function o(e){return e.width||e.right-e.left}function i(e){return e.height||e.bottom-e.top}function a(){return{}}function l(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}return e.nextElementSibling||r()}function c(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function u(e){var r=v.classesCache[e];return r?r.lastIndex=0:v.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function s(e,r){var n=e.className;n.length?u(r).test(n)||(e.className+=" "+r):e.className=r}function d(e,r){e.className=e.className.replace(u(r)," ").trim()}function m(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function f(e,r){var n=m(r),t={pageX:"clientX",pageY:"clientY"};return e in t&&!(e in n)&&t[e]in n&&(e=t[e]),n[e]}function g(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function p(e,r,n){e&&(v.extra=n,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}var v={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,isContainerModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},h=function(u,m){function h(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function x(r){e.applyAsync(function(){var e=Array.isArray(r)?r:h(r);e.forEach(function(e){angular.forEach(re.nameSpace,function(r){var n;n=v.containers[r].indexOf(e),v.containers[r].splice(n,1),v.containersCtx[r].splice(n,1)})})})}function y(e){var n=e?"off":"on";r(Z,n,"mouseup",A),u.forEach(function(e){r(e,"on","mousedown",S)})}function E(e){var n=e?"off":"on";r(Z,n,"mousemove",X)}function C(e){var n=e?"off":"on";r(Z,n,"selectstart",b),r(Z,n,"click",b),r(Z,n,"touchmove",b)}function M(){y(!0),x(u),A({})}function b(e){v.grabbed&&e.preventDefault()}function S(e){if(e=e||window.event,!(0!==e.which&&1!==e.which||e.metaKey||e.ctrlKey)){var r=Y(e.target);r&&(v.grabbed=r,E(),"mousedown"===e.type&&(e.preventDefault(),("INPUT"===r.item.tagName||"TEXTAREA"===r.item.tagName)&&r.item.focus()))}}function X(e){var r=v.grabbed;if(E(!0),C(),w(),I(r),!re.direction){var n=v.sourceItem.parentElement,t=n.offsetHeight,o=n.offsetWidth,i=v.sourceItem.clientHeight,a=v.sourceItem.clientWidth;re.direction=o/a>t/i?"horizontal":"vertical"}var l=J(v.sourceItem);v.offsetX=f("pageX",e)-l.left,v.offsetY=f("pageY",e)-l.top,v.clientX=f("clientX",e),v.clientY=f("clientY",e),re.boundingBox&&(v.offsetXr=f("pageX",e)-l.right,v.offsetYb=f("pageY",e)-l.bottom),e.preventDefault(),s(v.item,re.classes.transit),P(),v.mirror.style.left=v.clientX-v.offsetX+"px",v.mirror.style.top=v.clientY-v.offsetY+"px",R(e)}function Y(e){if(!ne.dragging||!v.mirror){for(var r=e;e.parentElement&&!Q(e.parentElement);){if(re.invalid(e,r))return;if(e=e.parentElement,!e)return}var n=e.parentElement;if(n&&!re.invalid(e,r)&&re.moves(e,n,r))return{item:e,source:n}}}function O(e){var r=Y(e);r&&I(r)}function I(e){v.sourceItem=v.item=e.item,v.source=e.source,v.initialSibling=v.currentSibling=l(e.item),K(e.item,e.source)?(v.item=e.item.cloneNode(!0),v.copy=!0,re.scope&&re.scope.$emit("dragularcloned",v.item,e.item)):v.copy=!1;var r=u.indexOf(e.source);return v.sourceModel=re.containersModel[r],v.initialIndex=g(e.item,e.source),ne.dragging=!0,re.scope&&re.scope.$emit("dragulardrag",v.sourceItem,v.source),!0}function T(){return!1}function w(){ne.dragging&&N(v.item,v.item.parentElement)}function B(){v.grabbed=!1,E(!0),C(!0)}function A(e){if(B(),ne.dragging){e=e||window.event,v.clientX=f("clientX",e),v.clientY=f("clientY",e);var r=G(v.mirror,v.clientX,v.clientY),n=k(r,v.clientX,v.clientY);!n||v.copy&&n===v.source?re.removeOnSpill?$():D():N(v.item,n),v.target=null,v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularrelease,r),re.scope&&re.scope.$emit("dragularrelease",v.item,v.source)}}function N(r,n){function t(){re.scope&&(j(n)?re.scope.$emit("dragularcancel",r,v.source,v.sourceModel,v.initialIndex):re.scope.$emit("dragulardrop",r,n,v.source,v.sourceModel,v.initialIndex,v.targetModel))}if(v.sourceModel&&!j(n)){var o=r,i=g(o,n);e.$applyAsync(function(){n===v.source?v.sourceModel.splice(i,0,v.sourceModel.splice(v.initialIndex,1)[0]):(v.dropElmModel=v.copy?angular.copy(v.sourceModel[v.initialIndex]):v.sourceModel[v.initialIndex],v.targetModel=v.isContainerModel?v.isContainerModel:v.targetCtx.m,n.removeChild(o),v.copy||v.sourceModel.splice(v.initialIndex,1),v.targetModel.splice(i,0,v.dropElmModel)),r.parentElement&&r.parentElement.removeChild(r),t(),H()})}else t(),H()}function $(){if(ne.dragging){var r=v.item.parentElement;r&&r.removeChild(v.item),v.sourceModel&&e.$applyAsync(function(){v.sourceModel.splice(v.initialIndex,1),H()}),re.scope&&re.scope.$emit(v.copy?"dragularcancel":"dragularremove",v.item,r,v.sourceModel,v.initialIndex),v.sourceModel||H()}}function D(e){if(ne.dragging){var r=arguments.length>0?e:re.revertOnSpill,n=v.item.parentElement,t=j(n);t===!1&&v.copy===!1&&r&&v.source.insertBefore(v.item,v.initialSibling),!v.sourceModel||v.copy||r?re.scope&&(t||r)&&re.scope.$emit("dragularcancel",v.item,v.source):N(v.item,n),(!v.sourceModel||v.copy||r||t)&&H()}}function H(){B(),U(),v.item&&d(v.item,re.classes.transit),ne.dragging=!1,re.removeOnSpill===!0&&L(),re.scope&&(re.scope.$emit("dragularout",v.item,v.lastDropTarget,v.source),re.scope.$emit("dragulardragend",v.item)),v.source=v.item=v.sourceItem=v.initialSibling=v.currentSibling=v.sourceModel=null,v.initialIndex=v.currentIndex=v.lastDropTarget=v.isContainerModel=v.targetModel=null,v.dropElmModel=v.targetCtx=v.copy=null}function j(e,r){var n=r||(v.mirror?v.currentSibling:l(v.item));return e===v.source&&n===v.initialSibling}function k(e,r,n){function t(){var t=!1;if(Q(o)){for(var i=z(o,e),a=F(o,i,r,n),l=j(o,a),c=re.nameSpace.length;c--;){if(-1!==v.containers[re.nameSpace[c]].indexOf(o)){v.targetCtx=v.containersCtx[re.nameSpace[c]][v.containers[re.nameSpace[c]].indexOf(o)];break}v.targetCtx||(v.targetCtx=v.containersCtx.dragularCommon[v.containers.dragularCommon.indexOf(o)])}t=l||v.targetCtx.o.accepts(v.item,o,v.source,a,v.sourceModel,v.initialIndex)&&re.canBeAccepted(v.item,o,v.source,a,v.sourceModel,v.initialIndex),v.target!==o&&(v.target=o)}return t}for(var o=e;o&&!t();)o=o.parentElement;return o}function R(e){function r(e){re.scope&&re.scope.$emit("dragular"+e,v.item,v.lastDropTarget,v.source),re.removeOnSpill===!0&&("over"===e?q():L())}function n(){m&&r("over")}function t(){v.lastDropTarget&&r("out")}if(v.mirror){e=e||window.event,v.clientX=f("clientX",e),v.clientY=f("clientY",e);var o,i,a,c=v.clientX-v.offsetX,u=v.clientY-v.offsetY;re.boundingBox&&(o=f("pageX",e),i=f("pageY",e),a=J(re.boundingBox)),re.lockY||(!re.boundingBox||o>a.left+v.offsetX&&o<a.right+v.offsetXr?v.mirror.style.left=c+"px":re.boundingBox&&(v.mirror.style.left=o<a.left+v.offsetX?v.clientX-(o-a.left)+"px":v.clientX-v.mirrorWidth-(o-a.right)+"px")),re.lockX||(!re.boundingBox||i>a.top+v.offsetY&&i<a.bottom+v.offsetYb?v.mirror.style.top=u+"px":re.boundingBox&&(v.mirror.style.top=i<a.top+v.offsetY?v.clientY-(i-a.top)+"px":v.clientY-v.mirrorHeight-(i-a.bottom)+"px"));var s=G(v.mirror,v.clientX,v.clientY),d=k(s,v.clientX,v.clientY),m=d!==v.lastDropTarget;if(s!==v.lastElementBehindCursor&&(p(s,v.dragOverEvents.dragularenter,!!d),v.lastElementBehindCursor&&p(v.lastElementBehindCursor,v.dragOverEvents.dragularleave,s),v.lastElementBehindCursor=s),m&&(t(),v.lastDropTarget=d,n()),d===v.source&&v.copy)return void(v.item.parentElement&&v.item.parentElement.removeChild(v.item));var g,h=z(d,s);if(null!==h)g=F(d,h,v.clientX,v.clientY);else{if(re.revertOnSpill!==!0||v.copy)return void(v.copy&&null!==v.item.parentElement&&v.item.parentElement.removeChild(v.item));g=v.initialSibling,d=v.source}(null===g||g!==v.item&&g!==l(v.item)&&g!==v.currentSibling)&&(v.currentSibling=g,d.insertBefore(v.item,g),re.scope&&re.scope.$emit("dragularshadow",v.item,d))}}function q(){d(v.item,re.classes.hide)}function L(){ne.dragging&&s(v.item,re.classes.hide)}function W(e){if(v.target){var r=v.target.scrollTop;v.target.scrollTop+=e.deltaY,r!==v.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function P(){if(!v.mirror){var e=v.sourceItem.getBoundingClientRect();v.mirror=v.sourceItem.cloneNode(!0),v.mirrorWidth=e.width,v.mirrorHeight=e.height,v.mirror.style.width=o(e)+"px",v.mirror.style.height=i(e)+"px",d(v.mirror,re.classes.transit),s(v.mirror,re.classes.mirror),re.mirrorContainer.appendChild(v.mirror),r(Z,"on","mousemove",R),s(V,re.classes.unselectable),r(v.mirror,"on","wheel",W),re.scope&&re.scope.$emit("dragularcloned",v.mirror,v.sourceItem)}}function U(){v.mirror&&(d(V,re.classes.unselectable),r(Z,"off","mousemove",R),r(v.mirror,"off","wheel",W),v.mirror.parentElement.removeChild(v.mirror),v.mirror=null)}function z(e,r){for(var n=r;n!==e&&n.parentElement!==e;)n=n.parentElement;return n===Z?null:n}function F(e,r,n,t){function a(){var r,o,i,a=e.children.length;for(r=0;a>r;r++){if(o=e.children[r],i=o.getBoundingClientRect(),s&&i.left>n)return o;if(!s&&i.top>t)return o}return null}function c(){var e=r.getBoundingClientRect();return u(s?n>e.left+o(e)/2:t>e.top+i(e)/2)}function u(e){return e?l(r):r}var s="horizontal"===re.direction,d=r!==e?c():a();return d}function K(e,r){return"boolean"==typeof re.copy?re.copy:re.copy(e,r)}function _(e,r){return"undefined"!=typeof window[r]?window[r]:Z.clientHeight?Z[e]:V[e]}function J(e){var r=e.getBoundingClientRect(),n=_("scrollTop","pageYOffset"),t=_("scrollLeft","pageXOffset");return{left:r.left+t,right:r.right+t,top:r.top+n,bottom:r.bottom+n}}function G(e,r,n){var t,o=e||{},i=o.className;return o.className+=" "+re.classes.hide,t=document.elementFromPoint(r,n),o.className=i,t}1!==arguments.length||Array.isArray(u)||angular.isElement(u)||u[0]||"string"==typeof u?"string"==typeof u&&(u=document.querySelectorAll(u)):(m=u,u=[]);var Q,V=document.body,Z=document.documentElement,ee={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},re={dragOverEventNames:["dragularenter","dragularleave","dragularrelease"],classes:ee,containers:!1,moves:t,accepts:t,canBeAccepted:t,isContainer:n,copy:!1,invalid:T,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,containersModel:!1,isContainerModel:a};c(re.boundingBox)||(re.boundingBox=null),m&&m.classes&&(angular.extend(ee,m.classes),angular.extend(m.classes,ee)),angular.extend(re,m),re.mirrorContainer||(re.mirrorContainer=document.body),u=re.containers||u||[],u=h(u),re.containersModel=re.containersModel?Array.isArray(re.containersModel[0])?re.containersModel:[re.containersModel]:[],re.nameSpace||(re.nameSpace=["dragularCommon"]),Array.isArray(re.nameSpace)||(re.nameSpace=[re.nameSpace]),re.nameSpace.forEach(function(e){v.containers[e]||(v.containers[e]=[],v.containersCtx[e]=[]);for(var r=u.length,n=v.containers[e].length,t=0;r>t;t++)v.containers[e][t+n]=u[t],v.containersCtx[e][t+n]={o:re,m:re.containersModel[t]}}),y(),angular.forEach(re.dragOverEventNames,function(e){document.createEvent?(v.dragOverEvents[e]=document.createEvent("HTMLEvents"),v.dragOverEvents[e].initEvent(e,!0,!0)):(v.dragOverEvents[e]=document.createEventObject(),v.dragOverEvents[e].eventType=e)}),Q=function(e){for(var r=re.nameSpace.length;r--;)if(-1!==v.containers[re.nameSpace[r]].indexOf(e))return!0;return re.isContainer(e)?(v.isContainerModel=re.isContainerModel(e),!0):(v.isContainerModel=null,!1)};var ne={containers:v.containers,containersCtx:v.containersCtx,isContainer:Q,start:O,end:w,cancel:D,remove:$,destroy:M,dragging:!1};return ne};return h.cleanEnviroment=function(){v.classesCache={},v.containersCtx={},v.containers={},v.mirror=void 0},h.shared=v,h}])},{"./dragularModule":2}]},{},[2]);
//# sourceMappingURL=dragular.min.js.map